{% extends "base.html" %}
{% block content %}
<h2>Logs</h2>
<div class="card p-3">
  {% if is_admin %}
    <p><strong>Admin Mode:</strong> Viewing all logs</p>
  {% else %}
    <p><strong>User Mode:</strong> Viewing only your activity</p>
  {% endif %}
  
  <table border="1">
    <thead>
      <tr>
        <th>S.No.</th>
        <th>Tracker ID</th>
        {% if is_admin %}<th>User ID</th>{% endif %}
        <th>IP Address</th>
        <th>User Agent</th>
        <th>Timestamp</th>
        <th>City</th>
        <th>Region</th>
        <th>Country</th>
        <th>Latitude</th>
        <th>Longitude</th>
      </tr>
    </thead>
    <tbody>
      {% for row in table_data %}
      <tr>
        <td>{{ loop.revindex }}</td>
        <td>{{ row.track_id }}</td>
        {% if is_admin %}<td>{{ row.user_id }}</td>{% endif %}
        <td>{{ row.ip }}</td>
        <td>{{ row.ua }}</td>
        <td>{{ row.ts }}</td>
        <td>{{ row.city }}</td>
        <td>{{ row.region }}</td>
        <td>{{ row.country }}</td>
        <td>{{ row.lat }}</td>
        <td>{{ row.lon }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
